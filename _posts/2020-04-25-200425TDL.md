---
title:  "20.04.25 (토)"
excerpt: ""

categories:
  - Diary

tags:
  - 운영체제
---

## 오늘 할 일 (계획)

- ~~운영체제 6주차 듣기~~
- 데이터베이스 중간 대체 과제


## 오늘 한 일

- ##### 운영체제

  오늘은 Producer / Consumer Problem , Readers / Writers Problem에 대해 배웠다.

  우선 Producer / Consumer Problem 에 대해 알아보자.

  생산자 - 소비자 문제는 버퍼를 두고 Data를 읽고 쓰는 것에 대한 문제이다.

  버퍼에 Data가 없는데 I/O 장치가 가져가려고 하거나, 버퍼가 Data로 꽉 찼는데 쓰려고 하는 경우 발생한다.

  이 문제를 어떻게 해결 할 수 있을까?  바로 세마포어와 모니터를 사용 해 해결 할 수 있다.

  ```c
  // Producer
  
  semaphore s = 1, n = 0, e = sizeofbuffer;
  void producer(){
    while(1){
      produce();
      semWait(e); // 버퍼에 빈 자리가 있는지 확인한 후 빈 자리가 없다면 Block
      semWait(s);
      append();
      semSignal(s);
      semSignal(n); // 버퍼에 Data를 넣었기 때문에 기다리고 있는 Consumer가 있다면 깨운다
    }
  }
  
  void consumer(){
    while(1){
      semWait(n); // 버퍼에 Data가 있는지 확인한 후 없다면 Block
      semWait(s);
      take();
      semSignal(s);
      semSignal(e); // 버퍼에서 Data를 가져갔기 때문에 기다리는 Producer가 있다면 깨운다
    }
  }
  ```

  여기서 교수님이 내준 문제가 있다. **바로 7,8번 17,18번 코드를 서로 바꾼다면 어떤일이 일어날 것인가?**

  7,8번 코드를 바꾼다면 버퍼에 빈 자리가 있는지 확인한 후 빈자리가 없다면 Block 되는 과정을 Critical Section 안에서 하게 된다.

  **이때 Deadlock이 발생할 수 있다고 한다. 어떤 경우에 그러는지는 아직 잘 모르겠다..**

  다음으로 모니터를 사용하는 경우가 있다. 모니터를 세마포어를 잘 사용하지 못하는 사람에게 유용한 구조체 이다.

  모니터는 큐를 가지고 있는 함수의 집합이라고 할 수 있다.

  이 모니터 속으로는 Critical Section과 마찬가지로 한 번에 한 개의 프로세스 밖에 들어갈 수 없다.

  **결국 모니터를 사용하는 경우 위 에서 문제가 됐던 Critical Section 에 들어 간 후 버퍼를 확인하는 셈이다.**

  **그런데 이 경우에는 아무 문제가 없다 왜 그럴까?** 이게 교수님이 물어본 두 번째 문제이다.

  우선 데드락이 일어나는 이유에 대해서 먼저 생각해보고 해결해야겠다.

  다음으로는 Readers / Writers Problem에 대해 배웠다.

  Writer 작업은 Data를 쓰는 작업이다. 결국 Data를 읽어와서 쓴다고 보면 되겠다.

  Read 작업은 말 그대로 Data를 읽기만 하는 작업이다.

  Write 와 Write, Write 와 Read 작업은 동시에 이루어 질 수 없지만 Read 작업은 서로 동시에 이루어 져도 된다.

  그래서 나온 해결방법이 Read에게 우선순위를 주는 방안이다. 구현 하기 위해서는 Critical Section이 두 개 필요하다.

  개념만 설명하자면 작업을 하기 위한 C.S 에는 첫 번째 Read만 기다리고 있다가 이 첫 번째 Read가 C.S로 들어 갔을 때

  readcount의 C.S 에서 기다리고 있는 Read 들이 다 같이 들어가 작업을 수행한다.

  이런 느낌으로 알고 있으면 되겠다.

## 내일 할 일

- 


## 이번주 할 일

- ~~취업역량개발론 6주차 듣기 (월)~~
- ~~서양고전강독 7주차 듣기 (월)~~
- ~~알기쉬운코딩 8주차 듣기 (월)~~
- ~~운영체제 5주차 듣기 (월)~~
- ~~데이터베이스 6주차 듣기 (화)~~
- ~~서양고전강독 과제 제출 (화)~~
- ~~대학생을위한실용금융 5주차, 6주차 듣기 (수)~~
- ~~대학생을위한실용금융 과제 제출 (수)~~
- ~~확률과 통계 6주차 듣기 (목)~~
- ~~운영체제 3, 4강 퀴즈 준비 (목)~~
- ~~웹 프로그래밍 6주차 듣기 (금)~~
- ~~운영체제 6주차 듣기 (토)~~