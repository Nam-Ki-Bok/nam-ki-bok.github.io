---
title:  "20.04.20 (월)"
excerpt: ""

categories:
  - Diary

tags:
  - 취업역량개발론
  - 서양고전강독
---

## 오늘 할 일 (계획)

- ~~취업역량개발론 6주차 듣기~~
- ~~서양고전강독 7주차 듣기~~
- ~~알기쉬운코딩 8주차 듣기~~
- ~~운영체제 5주차 듣기~~


## 오늘 한 일

- ##### 운영체제

  생각해 보아야 할 것 

  1. semaphore 에서 s 값을 절대로 음수로 초기화 하면 안되는 이유

  2. s 값을 1이 아닌 3으로 초기화 하는 경우 발생하는 일

  3. s 값이 음수일때 의미하는 바는 무엇일까?

     <br>

  MultiProgramming 과 MultiProcessing 은 전혀 다른 의미를 가진다.

  전자는 여러개의 프로그램이 동시에 메모리에 올라가서 번갈아 가며 실행 하는 것이고

  후자는 실제로 CPU가 여러개 이며 각각의 CPU에서 프로그램이 한 개씩 실행 된다.

  <br>

  일단 5장에서 배우는 중요한 내용은 자원을 다룰때 발생 할 수 있는 세가지 오류에 대해 배우고

  그 오류를 해결 하는 방법에 대해 배운다. 세가지 오류로는 상호배제의 필요성, deadlock, starvation이 있다.

  그 중 먼저 상호배제 (Multual Exclusion) 에 대해 알아본다.

  상호배제는 Critical Section에 있는 코드는 한 번에 한 개 씩 실행을 해야한다.

  <br>

  상호배제를 지키기 위해 필요한 요구가 6가지 있다.

  1. Critical Section에는 한 번에 한 프로세스만 들어갈 수 있다.
  2. Critical Section이 아닌 지역에서 멈춰 있는 프로세스가 다른 프로세스를 방해해선 안된다.
  3. Deadlock과 starvation이 없어야 한다.
  4. Critical Section이 비어있는데 못 들어가면 안된다.
  5. 프로세스 개수나 속도에 따라서 작동을 하기도 하고 안하기도 하면 안된다.
  6. Critical Section(이하 C.S) 에 한 프로세스가 무한히 있으면 안된다.

  <br>

  상호배제를 지키기 위해 H.W 단계, O/S 단계, Application 단계가 있다.

  우선 H.W 단계를 알아보자 아주 아주 간단하게 설명 할 것이다.

  1. Compare and Swap Instruction

     bolt 값을 통해 C.S 진입 여부를 판단 한다.

  2. Exchange Instrcution

     bolt 값과 각 프로세스의 key 값을 비교해 C.S 진입 여부를 판단 한다.

  <br>

  이 H.W 단계를 사용 함으로써 장점과 단점이 있다.

  장점을 먼저 알아보자

  1. 프로세스 개수 상관 없이 구현 가능
  2. 매우 간단하게 구현 가능
  3. 멀티 C.S 구현 가능

  하지만 단점이 매우매우 커 자주 사용하지는 않는다고 한다.

  단점으로는

  1. Busy-Waiting

     여기엔 코드를 작성하지 않았지만 H.W를 통해 상호배제를 지원하는 경우

     bolt 값을 비교하거나 key 값을 비교할 때 while문을 의미없이 계속 반복할 수 있다.

     이 경우 CPU는 잡아먹으면서 아무일도 하지 않기때문에 Busy-Waiting 이라고 한다.

  2. Starvation

     말 그대로 굶는 것이다. 특정 프로세스에게 순서를 안줘 영원히 실행되지 못하는 것이다.

  3. Deadlock

     멀티 C.S를 구현했을 경우 발생 할 수 있다.

  <br>

  그래서 Busy-Waiting과 Starvation을 없애는 방안으로 O/S에서 제공하는 Semaphore를 이용할 수 있다.

  Semaphore은 구조체 변수로 생각할 수 있다. 정수 한 개와 큐 한 개를 가지고 있다.

  Semaphore을 여기에 다 정리하긴 어려울 것 같아서 나중에 따로 포스팅을 해야겠다.

  그리고 맨~ 처음에 말했던 생각해 보아야 할 것

  <br>

  **4월 22일 수요일 선배의 도움을 받아 해결했다.**

  1. semaphore 에서 s 값을 절대로 음수로 초기화 하면 안되는 이유

     만약 동일 코드를 가진 여러 쓰레드가 동작하는 경우 데드락에 걸린다.

     여기서 추가로 0인 경우도 안된다고 생각했는데 착각이였다.
  
     모든 프로세스가 wait &rarr; C.S &rarr; signal 순으로 동작하는게 아니다.
  
     어떤 프로세스는 signal 만 여러번 있을수도 있다.
  
     따라서 0 이어도 다른 프로세스가 처음 들어간 프로세스를 큐에서 빼줄 수 있다.
  
     <br>
  
  2. s 값을 1이 아닌 3으로 초기화 하는 경우 발생하는 일
  
     C.S 방의 크기가 3으로 바뀌어 세 개의 프로세스가 들어와 동작한다.
  
     단지 이 세 개의 프로세스가 Race condition만 없으면 된다.
  
     있다면 코딩을 잘못한것이다.
  
     <br>
  
  3. s 값이 음수일때 의미하는 바는 무엇일까?
  
     &rarr; s 값의 절대 값이 큐에 남아있는 프로세스 개수를 의미한다.
  
  내가 당시 이 문제를 풀때 고정관념에 사로잡혀 있었다. 모든 프로세스가 wait &rarr; C.S &rarr; signal 순으로 동작하는게 아니다.
  
  어떤 프로세스는 signal만 가지고 있을 수 도있고 그렇다 ! 순서대로 동작한다는 생각을 버리자
  
  저 순서는 상호배제를 도와주는 순서일 뿐이다. 그리고 운영체제 6주차 강의를 들으면 더 이해가 잘 간다고 하니까
  
  이번주 주말에 잘 들어보자 !

## 내일 할 일

- 데이터베이스 6주차 듣기
- 데이터베이스 보충 강의 듣기
- 서양고전강독 과제 제출 <span style="font-size:12px; color: red;">Window OS로 제출</span>


## 이번주 할 일

- ~~취업역량개발론 6주차 듣기 (월)~~
- ~~서양고전강독 7주차 듣기 (월)~~
- ~~알기쉬운코딩 8주차 듣기 (월)~~
- ~~운영체제 5주차 듣기 (월)~~
- 데이터베이스 6주차 듣기 (화)
- 서양고전강독 과제 제출 (화)
- 대학생을위한실용금융 5주차, 6주차 듣기 (수)
- 대학생을위한실용금융 과제 제출 (수)
- 확률과 통계 6주차 듣기 (목)
- 운영체제 3, 4강 퀴즈 준비 (목)
- 웹 프로그래밍 6주차 듣기 (금)
- 운영체제 6주차 듣기 (토)